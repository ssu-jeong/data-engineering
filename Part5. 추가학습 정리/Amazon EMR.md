## Amazon EMR

---

Apache Spark, Hive, Presto 및 다른 빅 데이터 워크로드를 손쉽게 실행하고 크기를 조정

### 작동방식

--

Amazon EMR(이전에는 Amazon Elastic MapReduce)은 다음과 같은 빅 데이터 프레임워크 실행을 간소화하는 관리형 클러스터 플랫폼. Apache Spark, Apache Hive 및 Presto와 같은 오픈 소스 분석 프레임워크를 사용하여 대규모 분산 데이터 처리 작업, 대화형 SQL 쿼리 및 기계 학습(ML) 애플리케이션을 실행하기 위한 클라우드 빅 데이터 플랫폼.

Amazon EMR을 사용하면 용량 프로비저닝 및 클러스터 조정과 같은 시간 소모적인 작업을 자동화하여 빅 데이터 환경을 쉽게 설정, 운영 및 확장할 수 있음.

### 클러스터 및 노드 이해

---

Amazon EMR의 중심 구성 요소. 클러스터는 Amazon Elastic Compute Cloud (Amazon EC2) 인스턴스의 모음. 클러스터에 있는 각 인스턴스를 노드라고 하며 각 노드에는 클러스터 내에 역할이 있다(노드 유형). 

또한 Amazon EMR은 각 노드 유형에 다양한 소프트웨어 구성 요소를 설치하여 각 노드에 Apache Hadoop과 같은 분산 애플리케이션의 역할을 부여.

- • 마스터 노드: 처리를 위해 다른 노드 간에 데이터와 작업의 배포를 조정하는 소프트웨어 구성 요소를 실행하여 클러스터를 관리하는 노드. 마스터 노드는 작업 상태를 추적하고 클러스터 상태를 모니터링.모든 클러스터에는 마스터 노드가 있으며 마스터 노드만으로 단일 노드 클러스터를 생성 가능.

- • 코어 노드: 클러스터의 Hadoop 분산 파일 시스템 (HDFS) 에서 작업을 실행하고 데이터를 저장하는 소프
트웨어 구성 요소가 있는 노드. 다중 노드 클러스터에는 1개 이상의 코어 노드가 있다.

- • 작업 노드: HDFS에 데이터를 저장하지는 않고 작업만 실행하는 소프트웨어 구성 요소가 있는 노드. 작업 노드는 선택 사항.

### Amazon EMR 사용의 이점

---

**비용절감**

Amazon EMR 요금은 배포하는 인스턴스 유형 및 Amazon EC2 인스턴스의 수와 클러스터를 시작하는 리전에 따라 다름. 온디맨드 요금은 낮은 요금을 제공하지만, 예약 인스턴스나 스팟 인스턴스를 구매하면 비용을 훨씬 더 줄일 수 있다. 스팟 인스턴스는 경우에 따라 온디맨드 요금의 10분의 1만큼 저렴한 비용절감 가능.

- 추가 
EMR 클러스터와 함께 Amazon S3, Amazon Kinesis 또는 DynamoDB를 사용할 경우 해당 서비스에 대한 추가 요금이 발생하며 이러한 요금은 Amazon EMR 사용 요금과 별도로 청구.

**AWS 통합**

Amazon EMR은 다른 제품과 통합합니다.AWS클러스터에 네트워킹, 스토리지, 보안 등과 관련된 기능과 기능을 제공하는 서비스. 

• 클러스터의 노드를 구성하는 인스턴스에 대한 Amazon EC2
• 인스턴스를 시작하는 가상 네트워크를 구성하기 위한 Amazon Virtual Private Cloud (Amazon VPC)
• Amazon S3 - 입력 및 출력 데이터를 보관하기 위한
• Amazon CloudWatch - 클러스터 성능을 모니터링하고 경보를 구성하기 위한
• AWS Identity and Access Management(IAM) - 권한 구성
• 서비스에 수행되는 요청을 감사하기 위한 AWS CloudTrail
• 클러스터의 일정을 계획하고 클러스터를 시작하기 위한 AWS Data Pipeline
• AWS Lake FormationAmazon S3 데이터 레이크의 데이터를 검색, 카탈로그 및 보호하기 위한

**배포**

EMR 클러스터는 클러스터에 제출한 작업을 수행하는 EC2 인스턴스로 구성. 클러스터를 시작하면 Amazon EMR은 Apache Hadoop 또는 Spark와 같은 선택한 애플리케이션으로 인스턴스를 구성. 배치 처리, 짧은 지연 시간 쿼리, 스트리밍 데이터 또는 대규모 데이터 스토리지와 같은 클러스터 처리 필요에 가장 적합한 인스턴스 크기 및 유형을 선택. 

Amazon EMR은 클러스터에서 소프트웨어를 구성하는 다양한 방법을 제공. 예를 들어, Hadoop과 같은 다목적 프레임워크 및 Hive, Pig 또는 Spark와 같은 애플리케이션을 포함할 수 있는 선택한 애플리케이션 세트와 함께 Amazon EMR 릴리스 설치 가능. 여러 MapR 배포판 중 하나를 설치할 수도 있다. Amazon EMR은 Amazon Linux를 사용하므로, yum 패키지 관리자를 사용하거나 소스에서 클러스터에 소프트웨어를 수동으로 설치할 수도 있음.

**확장성 및 유연성**

Amazon EMR은 컴퓨팅 필요 변화에 따라 클러스터를 확장하거나 축소할 수 있는 유연성을 제공.
클러스터의 크기를 조정하여 피크 워크로드를 위해 인스턴스를 추가하거나 피크 워크로드가 감소할 때 비용을 제어하기 위해 인스턴스 제거 가능. 

또한 Amazon EMR은 여러 인스턴스 그룹을 실행하는 옵션도 제공하므로 한 그룹에서는 처리 성능을 보장하기 위해 온디맨드 인스턴스를 사용하면서 동시에 다른 그룹에서는 작업을 더 빠르게 완료하고 비용을 낮추기 위해 스팟 인스턴스를 사용할 수 있다. 다양한 인스턴스 유형을 혼합하여 특정 스팟 인스턴스 유형의 요금 이점을 이용할 수도 있다. 

또한 Amazon EMR은 입력, 출력 및 중간 데이터에 여러 파일 시스템을 사용할 수 있는 유연성도 제공.
컴퓨팅과 스토리지를 분리하고 클러스터의 수명 주기 이후에도 데이터를 유지할 수 있도록 EMR 파일 시스템 (EMRFS)을 선택하여 클러스터에서 실행하는 애플리케이션을 위한 데이터 계층으로 사용할 수 있음. 
EMRFS는 컴퓨팅 및 스토리지 필요에 맞게 독립적으로 확장하거나 축소할 수 있는 추가 이점을 제공. 클러스터의 크기를 조정하여 컴퓨팅 필요에 맞게 규모를 조정하고 Amazon S3를 사용하여 스토리지 필요에 맞게 규모 조정 가능. 

**안정성**

Amazon EMR은 클러스터의 노드를 모니터링하고 장애가 발생할 경우 인스턴스를 자동으로 종료 및 교체할 수 있다.

Amazon EMR은 클러스터가 자동 또는 수동으로 종료되는지 여부를 제어하는 구성 옵션을 제공. 클러스터가 자동으로 종료되도록 구성할 경우 모든 단계가 완료된 후 클러스터가 종료. 

또한 종료 방지 기능을 구성하여 처리 중 오류나 문제로 인해 클러스터의 인스턴스가 종료되는 것을 방지. 종료 방지 기능을 활성화한 경우 종료 전에 인스턴스에서 데이터를 복구할 수 있다.